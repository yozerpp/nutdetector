<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ImageProc: Detector Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ImageProc
   </div>
   <div id="projectbrief">Console pplication with classification and line detection capabilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="../../d9/d00/classDetector-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Detector Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../dc/d00/Detector_8h_source.html">Detector.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4de649b88322175831738b052d2072f9" id="r_a4de649b88322175831738b052d2072f9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4de649b88322175831738b052d2072f9">Detector</a> (Image *<a class="el" href="#ac71c97ccf3f2b4f962e125684d229910">image</a>)</td></tr>
<tr class="separator:a4de649b88322175831738b052d2072f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acee52d32d58af922b3eff1a116c20f46" id="r_acee52d32d58af922b3eff1a116c20f46"><td class="memItemLeft" align="right" valign="top">Common::ObjectPosition *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acee52d32d58af922b3eff1a116c20f46">detect</a> (unsigned int *labelLength)</td></tr>
<tr class="separator:acee52d32d58af922b3eff1a116c20f46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a4cd267cf4e88aad6bb216d6981eed553" id="r_a4cd267cf4e88aad6bb216d6981eed553"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4cd267cf4e88aad6bb216d6981eed553">_detect</a> (unsigned int i)</td></tr>
<tr class="separator:a4cd267cf4e88aad6bb216d6981eed553"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7f043d0cd813ba866d400ddca887ab33" id="r_a7f043d0cd813ba866d400ddca887ab33"><td class="memItemLeft" align="right" valign="top">Common::ObjectPosition&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a></td></tr>
<tr class="separator:a7f043d0cd813ba866d400ddca887ab33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e95358aa3044acc90b73ee2a6f308db" id="r_a9e95358aa3044acc90b73ee2a6f308db"><td class="memItemLeft" align="right" valign="top">Common::Color&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9e95358aa3044acc90b73ee2a6f308db">currentColor</a> {}</td></tr>
<tr class="separator:a9e95358aa3044acc90b73ee2a6f308db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1b30512cbba60feadcfc62e614bc773" id="r_aa1b30512cbba60feadcfc62e614bc773"><td class="memItemLeft" align="right" valign="top">const unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa1b30512cbba60feadcfc62e614bc773">data</a></td></tr>
<tr class="separator:aa1b30512cbba60feadcfc62e614bc773"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac71c97ccf3f2b4f962e125684d229910" id="r_ac71c97ccf3f2b4f962e125684d229910"><td class="memItemLeft" align="right" valign="top">Image *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac71c97ccf3f2b4f962e125684d229910">image</a></td></tr>
<tr class="separator:ac71c97ccf3f2b4f962e125684d229910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa76ac0826068088644ad64c7a52e2e6" id="r_aaa76ac0826068088644ad64c7a52e2e6"><td class="memItemLeft" align="right" valign="top">unsigned char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaa76ac0826068088644ad64c7a52e2e6">out</a></td></tr>
<tr class="separator:aaa76ac0826068088644ad64c7a52e2e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b8eda5ec4df84c126f4f0eed3d2c5ad" id="r_a0b8eda5ec4df84c126f4f0eed3d2c5ad"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0b8eda5ec4df84c126f4f0eed3d2c5ad">x</a></td></tr>
<tr class="separator:a0b8eda5ec4df84c126f4f0eed3d2c5ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e5deeabb50d7844f56097e1798786e0" id="r_a5e5deeabb50d7844f56097e1798786e0"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e5deeabb50d7844f56097e1798786e0">y</a></td></tr>
<tr class="separator:a5e5deeabb50d7844f56097e1798786e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ad91382d2b3d7e97e9b368a4ed5937bf8" id="r_ad91382d2b3d7e97e9b368a4ed5937bf8"><td class="memItemLeft" align="right" valign="top">static const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad91382d2b3d7e97e9b368a4ed5937bf8">kernelDim</a> =3</td></tr>
<tr class="separator:ad91382d2b3d7e97e9b368a4ed5937bf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4de649b88322175831738b052d2072f9" name="a4de649b88322175831738b052d2072f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4de649b88322175831738b052d2072f9">&#9670;&#160;</a></span>Detector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Detector::Detector </td>
          <td>(</td>
          <td class="paramtype">Image *</td>          <td class="paramname"><span class="paramname"><em>image</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  138</span>                                    {</div>
<div class="line"><span class="lineno">  139</span>    this-&gt;<a class="code hl_variable" href="#a0b8eda5ec4df84c126f4f0eed3d2c5ad">x</a>=image1-&gt;x;</div>
<div class="line"><span class="lineno">  140</span>    this-&gt;<a class="code hl_variable" href="#a5e5deeabb50d7844f56097e1798786e0">y</a>=image1-&gt;y;</div>
<div class="line"><span class="lineno">  141</span>    this-&gt;<a class="code hl_variable" href="#ac71c97ccf3f2b4f962e125684d229910">image</a>=image1;</div>
<div class="line"><span class="lineno">  142</span>    this-&gt;<a class="code hl_variable" href="#aa1b30512cbba60feadcfc62e614bc773">data</a>=image1-&gt;data;</div>
<div class="line"><span class="lineno">  143</span>    <a class="code hl_variable" href="#aaa76ac0826068088644ad64c7a52e2e6">out</a>=Common::initializeArray&lt;unsigned char&gt;((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) 255, <a class="code hl_variable" href="#a0b8eda5ec4df84c126f4f0eed3d2c5ad">x</a>*<a class="code hl_variable" href="#a5e5deeabb50d7844f56097e1798786e0">y</a>*3);</div>
<div class="line"><span class="lineno">  144</span>}</div>
<div class="ttc" id="aclassDetector_html_a0b8eda5ec4df84c126f4f0eed3d2c5ad"><div class="ttname"><a href="#a0b8eda5ec4df84c126f4f0eed3d2c5ad">Detector::x</a></div><div class="ttdeci">unsigned int x</div><div class="ttdef"><b>Definition</b> Detector.h:24</div></div>
<div class="ttc" id="aclassDetector_html_a5e5deeabb50d7844f56097e1798786e0"><div class="ttname"><a href="#a5e5deeabb50d7844f56097e1798786e0">Detector::y</a></div><div class="ttdeci">unsigned int y</div><div class="ttdef"><b>Definition</b> Detector.h:25</div></div>
<div class="ttc" id="aclassDetector_html_aa1b30512cbba60feadcfc62e614bc773"><div class="ttname"><a href="#aa1b30512cbba60feadcfc62e614bc773">Detector::data</a></div><div class="ttdeci">const unsigned char * data</div><div class="ttdef"><b>Definition</b> Detector.h:21</div></div>
<div class="ttc" id="aclassDetector_html_aaa76ac0826068088644ad64c7a52e2e6"><div class="ttname"><a href="#aaa76ac0826068088644ad64c7a52e2e6">Detector::out</a></div><div class="ttdeci">unsigned char * out</div><div class="ttdef"><b>Definition</b> Detector.h:23</div></div>
<div class="ttc" id="aclassDetector_html_ac71c97ccf3f2b4f962e125684d229910"><div class="ttname"><a href="#ac71c97ccf3f2b4f962e125684d229910">Detector::image</a></div><div class="ttdeci">Image * image</div><div class="ttdef"><b>Definition</b> Detector.h:22</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4cd267cf4e88aad6bb216d6981eed553" name="a4cd267cf4e88aad6bb216d6981eed553"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cd267cf4e88aad6bb216d6981eed553">&#9670;&#160;</a></span>_detect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Detector::_detect </td>
          <td>(</td>
          <td class="paramtype">unsigned int</td>          <td class="paramname"><span class="paramname"><em>initial</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>this function goes into every direction from starting point and paints every pixel with the starting color if they are marked as an containing an object in the binary input image</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">initial</td><td></td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   16</span>                                              {</div>
<div class="line"><span class="lineno">   17</span>        <span class="keyword">using </span>pairTp=std::pair&lt;int, int&gt;;</div>
<div class="line"><span class="lineno">   18</span>    <span class="keyword">auto</span>&amp; stack= *<span class="keyword">new</span> std::stack&lt;pairTp&gt;;</div>
<div class="line"><span class="lineno">   19</span>    stack.emplace(initial, 0);</div>
<div class="line"><span class="lineno">   20</span>    <span class="keywordflow">do</span>{</div>
<div class="line"><span class="lineno">   21</span>        <span class="keyword">auto</span>&amp; idx=stack.top();stack.pop();</div>
<div class="line"><span class="lineno">   22</span>        <span class="keywordtype">int</span> y_pos= idx.first /(int) <a class="code hl_variable" href="#a0b8eda5ec4df84c126f4f0eed3d2c5ad">x</a>;</div>
<div class="line"><span class="lineno">   23</span>        <span class="keywordtype">int</span> x_pos= idx.first % (int)<a class="code hl_variable" href="#a0b8eda5ec4df84c126f4f0eed3d2c5ad">x</a>;</div>
<div class="line"><span class="lineno">   24</span>        <span class="keywordflow">if</span>(y_pos &gt;=<a class="code hl_variable" href="#a5e5deeabb50d7844f56097e1798786e0">y</a> || y_pos &lt;0 ||x_pos &gt;=<a class="code hl_variable" href="#a0b8eda5ec4df84c126f4f0eed3d2c5ad">x</a> || x_pos &lt;0) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   25</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="#aa1b30512cbba60feadcfc62e614bc773">data</a>[idx.first] == (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) 0 &amp;&amp; Common::isWhite(&amp;<a class="code hl_variable" href="#aaa76ac0826068088644ad64c7a52e2e6">out</a>[idx.first * 3])){</div>
<div class="line"><span class="lineno">   26</span>            <span class="keywordflow">if</span>(y_pos&lt;(<span class="keywordtype">int</span>)<a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.y_start) {</div>
<div class="line"><span class="lineno">   27</span>                <a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.y_start=y_pos;</div>
<div class="line"><span class="lineno">   28</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(y_pos&gt;(<span class="keywordtype">int</span>)<a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.y_end)</div>
<div class="line"><span class="lineno">   29</span>                <a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.y_end=(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)y_pos;</div>
<div class="line"><span class="lineno">   30</span>            <span class="keywordflow">if</span>(x_pos&lt;(<span class="keywordtype">int</span>)<a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.x_start){</div>
<div class="line"><span class="lineno">   31</span>                <a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.x_start=x_pos;</div>
<div class="line"><span class="lineno">   32</span>            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (x_pos&gt;(<span class="keywordtype">int</span>)<a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.x_end)</div>
<div class="line"><span class="lineno">   33</span>                <a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.x_end=(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)x_pos;</div>
<div class="line"><span class="lineno">   34</span>            Common::writeColor(&amp;<a class="code hl_variable" href="#aaa76ac0826068088644ad64c7a52e2e6">out</a>[idx.first*3], <a class="code hl_variable" href="#a9e95358aa3044acc90b73ee2a6f308db">currentColor</a>);</div>
<div class="line"><span class="lineno">   35</span>            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt; <a class="code hl_variable" href="#ad91382d2b3d7e97e9b368a4ed5937bf8">kernelDim</a>; i++){</div>
<div class="line"><span class="lineno">   36</span>                <span class="keywordflow">for</span>( <span class="keywordtype">int</span> j=0; j&lt; <a class="code hl_variable" href="#ad91382d2b3d7e97e9b368a4ed5937bf8">kernelDim</a>  ;j++){</div>
<div class="line"><span class="lineno">   37</span>                    <span class="keywordtype">int</span> y_new=y_pos+ i -((int)<a class="code hl_variable" href="#ad91382d2b3d7e97e9b368a4ed5937bf8">kernelDim</a>/2);</div>
<div class="line"><span class="lineno">   38</span>                    <span class="keywordtype">int</span> x_new=x_pos+ j -(int)<a class="code hl_variable" href="#ad91382d2b3d7e97e9b368a4ed5937bf8">kernelDim</a>/2;</div>
<div class="line"><span class="lineno">   39</span>                    stack.emplace(y_new * <a class="code hl_variable" href="#a0b8eda5ec4df84c126f4f0eed3d2c5ad">x</a> + x_new,i * <a class="code hl_variable" href="#ad91382d2b3d7e97e9b368a4ed5937bf8">kernelDim</a> + j);</div>
<div class="line"><span class="lineno">   40</span>                }</div>
<div class="line"><span class="lineno">   41</span>            }</div>
<div class="line"><span class="lineno">   42</span>        }</div>
<div class="line"><span class="lineno">   43</span>    } <span class="keywordflow">while</span> (!stack.empty());</div>
<div class="line"><span class="lineno">   44</span>    <span class="keyword">delete</span>&amp; stack;</div>
<div class="line"><span class="lineno">   45</span>}</div>
<div class="ttc" id="aclassDetector_html_a7f043d0cd813ba866d400ddca887ab33"><div class="ttname"><a href="#a7f043d0cd813ba866d400ddca887ab33">Detector::currentPos</a></div><div class="ttdeci">Common::ObjectPosition currentPos</div><div class="ttdef"><b>Definition</b> Detector.h:18</div></div>
<div class="ttc" id="aclassDetector_html_a9e95358aa3044acc90b73ee2a6f308db"><div class="ttname"><a href="#a9e95358aa3044acc90b73ee2a6f308db">Detector::currentColor</a></div><div class="ttdeci">Common::Color currentColor</div><div class="ttdef"><b>Definition</b> Detector.h:19</div></div>
<div class="ttc" id="aclassDetector_html_ad91382d2b3d7e97e9b368a4ed5937bf8"><div class="ttname"><a href="#ad91382d2b3d7e97e9b368a4ed5937bf8">Detector::kernelDim</a></div><div class="ttdeci">static const unsigned int kernelDim</div><div class="ttdef"><b>Definition</b> Detector.h:20</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acee52d32d58af922b3eff1a116c20f46" name="acee52d32d58af922b3eff1a116c20f46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acee52d32d58af922b3eff1a116c20f46">&#9670;&#160;</a></span>detect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Common::ObjectPosition * Detector::detect </td>
          <td>(</td>
          <td class="paramtype">unsigned int *</td>          <td class="paramname"><span class="paramname"><em>labelLength</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>performs detection on the image it traverses every pixel and calls <code>_detect</code> to paint every pixel connecting to the pixel <code>data</code>[i] with the same color. It then performs a filtering on the found object positions depending on their size </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">labelLength</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array containing found object positions </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   71</span>                                                                    {</div>
<div class="line"><span class="lineno">   72</span>        printf(<span class="stringliteral">&quot;--Started detecting--\n&quot;</span>);</div>
<div class="line"><span class="lineno">   73</span><span class="comment">//        boost::thread::attributes attr;</span></div>
<div class="line"><span class="lineno">   74</span><span class="comment">//        boost::thread::id id= boost::this_thread::get_id();</span></div>
<div class="line"><span class="lineno">   75</span>        std::vector&lt;Common::ObjectPosition&gt; positions{};</div>
<div class="line"><span class="lineno">   76</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="#a0b8eda5ec4df84c126f4f0eed3d2c5ad">x</a> * <a class="code hl_variable" href="#a5e5deeabb50d7844f56097e1798786e0">y</a>; i++) {</div>
<div class="line"><span class="lineno">   77</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="#aa1b30512cbba60feadcfc62e614bc773">data</a>[i] == (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) 0) {</div>
<div class="line"><span class="lineno">   78</span>                <span class="keywordflow">if</span> (!Common::isWhite(&amp;<a class="code hl_variable" href="#aaa76ac0826068088644ad64c7a52e2e6">out</a>[i * 3])) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">   79</span>                <a class="code hl_variable" href="#a9e95358aa3044acc90b73ee2a6f308db">currentColor</a> = Common::randomColor();</div>
<div class="line"><span class="lineno">   80</span>                <a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>= Common::ObjectPosition(i % <a class="code hl_variable" href="#a0b8eda5ec4df84c126f4f0eed3d2c5ad">x</a>, i / <a class="code hl_variable" href="#a0b8eda5ec4df84c126f4f0eed3d2c5ad">x</a>);</div>
<div class="line"><span class="lineno">   81</span>                <a class="code hl_function" href="#a4cd267cf4e88aad6bb216d6981eed553">_detect</a>(i);</div>
<div class="line"><span class="lineno">   82</span>                <a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.x_len=<a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.x_end-<a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.x_start+1;</div>
<div class="line"><span class="lineno">   83</span>                <a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.y_len=<a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.y_end-<a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>.y_start+1;</div>
<div class="line"><span class="lineno">   84</span>                positions.push_back(<a class="code hl_variable" href="#a7f043d0cd813ba866d400ddca887ab33">currentPos</a>);</div>
<div class="line"><span class="lineno">   85</span>            }</div>
<div class="line"><span class="lineno">   86</span>        }</div>
<div class="line"><span class="lineno">   87</span><span class="comment">//        {</span></div>
<div class="line"><span class="lineno">   88</span><span class="comment">//            boost::unique_lock&lt;boost::mutex&gt; lock(mutex);</span></div>
<div class="line"><span class="lineno">   89</span><span class="comment">//            ++finishedThreads;</span></div>
<div class="line"><span class="lineno">   90</span><span class="comment">//        }</span></div>
<div class="line"><span class="lineno">   91</span><span class="comment">//        cond.notify_all();</span></div>
<div class="line"><span class="lineno">   92</span>        *labelLength=positions.size();</div>
<div class="line"><span class="lineno">   93</span>        printf(<span class="stringliteral">&quot;Initial object count: %d\n&quot;</span>, *labelLength);</div>
<div class="line"><span class="lineno">   94</span>        <span class="keywordtype">double</span> threshold=0;</div>
<div class="line"><span class="lineno">   95</span>        <span class="keywordflow">if</span>(<a class="code hl_define" href="../../df/d00/Detector_8cpp.html#a7c9c0415483bd5c84fac87a1b249fff4">THRESHOLDING_MODE</a>==0) { <span class="comment">//max thresholding</span></div>
<div class="line"><span class="lineno">   96</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; *labelLength; i++) {</div>
<div class="line"><span class="lineno">   97</span>                <span class="keywordtype">double</span> s = positions[i].y_len * positions[i].x_len * 1.0;</div>
<div class="line"><span class="lineno">   98</span>                <span class="keywordflow">if</span> (s &gt; threshold) threshold = s;</div>
<div class="line"><span class="lineno">   99</span>            }</div>
<div class="line"><span class="lineno">  100</span>            threshold /= 5;</div>
<div class="line"><span class="lineno">  101</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_define" href="../../df/d00/Detector_8cpp.html#a7c9c0415483bd5c84fac87a1b249fff4">THRESHOLDING_MODE</a>==1){ <span class="comment">//averaging</span></div>
<div class="line"><span class="lineno">  102</span>            <span class="keywordtype">double</span> sum=0.0;</div>
<div class="line"><span class="lineno">  103</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count=0;</div>
<div class="line"><span class="lineno">  104</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; *labelLength; i++) {</div>
<div class="line"><span class="lineno">  105</span>                sum += positions[i].y_len * positions[i].x_len * 1.0;</div>
<div class="line"><span class="lineno">  106</span>                count++;</div>
<div class="line"><span class="lineno">  107</span>            }</div>
<div class="line"><span class="lineno">  108</span>            threshold=sum/(count*3);</div>
<div class="line"><span class="lineno">  109</span>        }</div>
<div class="line"><span class="lineno">  110</span><span class="comment">//        for (int i=0; i&lt;*labelLength; i++){</span></div>
<div class="line"><span class="lineno">  111</span><span class="comment">//            if(abs(positions[i].y_end*1.0-positions[i].y_start)*abs(positions[i].x_end*1.0 - positions[i].x_start)&lt;threshold/3){</span></div>
<div class="line"><span class="lineno">  112</span><span class="comment">//                ObjectPosition small=positions[i];</span></div>
<div class="line"><span class="lineno">  113</span><span class="comment">//                ObjectPosition * closest=  findClosestLabel(positions.data(),&amp;small, *labelLength, threshold);</span></div>
<div class="line"><span class="lineno">  114</span><span class="comment">//                closest-&gt;x_start=small.x_start&lt;closest-&gt;x_start?small.x_start:closest-&gt;x_start;</span></div>
<div class="line"><span class="lineno">  115</span><span class="comment">//                closest-&gt;x_end=small.x_end&gt;closest-&gt;x_end?small.x_end:closest-&gt;x_end;</span></div>
<div class="line"><span class="lineno">  116</span><span class="comment">//                closest-&gt;y_start=small.y_start&lt;closest-&gt;y_start?small.y_start:closest-&gt;y_start;</span></div>
<div class="line"><span class="lineno">  117</span><span class="comment">//                closest-&gt;y_end=small.y_end&gt;closest-&gt;y_end?small.y_end:closest-&gt;y_end;</span></div>
<div class="line"><span class="lineno">  118</span><span class="comment">//            }</span></div>
<div class="line"><span class="lineno">  119</span><span class="comment">//        }</span></div>
<div class="line"><span class="lineno">  120</span>        std::vector&lt;Common::ObjectPosition&gt; filteredLabels{};</div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;*labelLength; i++){</div>
<div class="line"><span class="lineno">  122</span>            <span class="keywordflow">if</span>(positions[i].y_len * positions[i].x_len * 1.0 &gt; threshold){</div>
<div class="line"><span class="lineno">  123</span>                filteredLabels.push_back(positions[i]);</div>
<div class="line"><span class="lineno">  124</span>            }</div>
<div class="line"><span class="lineno">  125</span>        }</div>
<div class="line"><span class="lineno">  126</span>        *labelLength=filteredLabels.size();</div>
<div class="line"><span class="lineno">  127</span>        printf(<span class="stringliteral">&quot;filtered object count: %d\n&quot;</span>, *labelLength);</div>
<div class="line"><span class="lineno">  128</span>        <span class="keyword">delete</span>[] <a class="code hl_variable" href="#ac71c97ccf3f2b4f962e125684d229910">image</a>-&gt;data;</div>
<div class="line"><span class="lineno">  129</span>        <a class="code hl_variable" href="#ac71c97ccf3f2b4f962e125684d229910">image</a>-&gt;data=<a class="code hl_variable" href="#aaa76ac0826068088644ad64c7a52e2e6">out</a>;</div>
<div class="line"><span class="lineno">  130</span>        <a class="code hl_variable" href="#ac71c97ccf3f2b4f962e125684d229910">image</a>-&gt;channels=3;</div>
<div class="line"><span class="lineno">  131</span>        <span class="keywordflow">if</span>(SHOW_STEPS) prntstps(<a class="code hl_variable" href="#ac71c97ccf3f2b4f962e125684d229910">image</a>, <span class="stringliteral">&quot;cluster&quot;</span>)</div>
<div class="line"><span class="lineno">  132</span>        auto * ret= (Common::ObjectPosition*) malloc(*labelLength * sizeof(Common::ObjectPosition));</div>
<div class="line"><span class="lineno">  133</span>        memcpy(ret, filteredLabels.<a class="code hl_variable" href="#aa1b30512cbba60feadcfc62e614bc773">data</a>(), *labelLength* sizeof(Common::ObjectPosition));</div>
<div class="line"><span class="lineno">  134</span>        positions.clear();</div>
<div class="line"><span class="lineno">  135</span>        filteredLabels.clear();</div>
<div class="line"><span class="lineno">  136</span>        return ret;</div>
<div class="line"><span class="lineno">  137</span>    }</div>
<div class="ttc" id="aDetector_8cpp_html_a7c9c0415483bd5c84fac87a1b249fff4"><div class="ttname"><a href="../../df/d00/Detector_8cpp.html#a7c9c0415483bd5c84fac87a1b249fff4">THRESHOLDING_MODE</a></div><div class="ttdeci">#define THRESHOLDING_MODE</div><div class="ttdef"><b>Definition</b> Detector.cpp:8</div></div>
<div class="ttc" id="aclassDetector_html_a4cd267cf4e88aad6bb216d6981eed553"><div class="ttname"><a href="#a4cd267cf4e88aad6bb216d6981eed553">Detector::_detect</a></div><div class="ttdeci">void _detect(unsigned int i)</div><div class="ttdef"><b>Definition</b> Detector.cpp:16</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a9e95358aa3044acc90b73ee2a6f308db" name="a9e95358aa3044acc90b73ee2a6f308db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e95358aa3044acc90b73ee2a6f308db">&#9670;&#160;</a></span>currentColor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Common::Color Detector::currentColor {}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   19</span>{};</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f043d0cd813ba866d400ddca887ab33" name="a7f043d0cd813ba866d400ddca887ab33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f043d0cd813ba866d400ddca887ab33">&#9670;&#160;</a></span>currentPos</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Common::ObjectPosition Detector::currentPos</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa1b30512cbba60feadcfc62e614bc773" name="aa1b30512cbba60feadcfc62e614bc773"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1b30512cbba60feadcfc62e614bc773">&#9670;&#160;</a></span>data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned char* Detector::data</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac71c97ccf3f2b4f962e125684d229910" name="ac71c97ccf3f2b4f962e125684d229910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac71c97ccf3f2b4f962e125684d229910">&#9670;&#160;</a></span>image</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Image* Detector::image</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad91382d2b3d7e97e9b368a4ed5937bf8" name="ad91382d2b3d7e97e9b368a4ed5937bf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad91382d2b3d7e97e9b368a4ed5937bf8">&#9670;&#160;</a></span>kernelDim</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int Detector::kernelDim =3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aaa76ac0826068088644ad64c7a52e2e6" name="aaa76ac0826068088644ad64c7a52e2e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa76ac0826068088644ad64c7a52e2e6">&#9670;&#160;</a></span>out</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned char* Detector::out</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0b8eda5ec4df84c126f4f0eed3d2c5ad" name="a0b8eda5ec4df84c126f4f0eed3d2c5ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b8eda5ec4df84c126f4f0eed3d2c5ad">&#9670;&#160;</a></span>x</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int Detector::x</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5e5deeabb50d7844f56097e1798786e0" name="a5e5deeabb50d7844f56097e1798786e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e5deeabb50d7844f56097e1798786e0">&#9670;&#160;</a></span>y</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int Detector::y</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/include/<a class="el" href="../../dc/d00/Detector_8h_source.html">Detector.h</a></li>
<li>src/pipeline/<a class="el" href="../../df/d00/Detector_8cpp.html">Detector.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
